# Day 2 — BLOCKCHAIN_KNOWLEDGE

## 블록체인 지식 정리
- **EVM의 revert 동작**  
  Solidity에서 `revert`가 발생하면 해당 트랜잭션은 상태 변화를 모두 되돌리고, revert 데이터가 호출자에게 전달된다. 커스텀 에러는 이 revert 데이터를 구조화된 형태로 전달한다. 테스트에서 이를 확인하면, 메인넷에서도 동일한 revert 사유를 확인할 수 있어 디버깅이 편해진다.
- **이벤트와 로그 인덱싱**  
  이벤트는 블록 로그에 저장되어 오프체인에서 쉽게 검색할 수 있다. `indexed` 키워드는 이벤트 필드를 토픽(topic)으로 변환해 빠른 필터링을 도와준다. 입금·출금 이벤트에 `indexed account`를 넣으면, 나중에 특정 주소의 활동을 빠르게 찾을 수 있다.
- **ETH 전송 메커니즘**  
  Solidity에서 ETH를 전송할 때는 `call`, `transfer`, `send` 3가지 방법이 있다. `transfer`와 `send`는 2300 gas 제한 때문에 복잡한 fallback 함수를 가진 컨트랙트에 전송하면 실패할 수 있다. 최신 베스트 프랙티스는 `call`을 사용하고, 반환값을 확인한 뒤 revert하는 것이다. 또한 재진입 공격을 막기 위해 상태 변경을 먼저 하고 외부 호출을 나중에 하는 패턴(Checks-Effects-Interactions)을 따른다.
- **테스트넷과 메인넷의 차이**  
  로컬 Foundry 테스트는 EVM 스펙을 따르지만, 메인넷에서는 가스 비용과 네트워크 상태가 다를 수 있다. 최소 입금 금액과 같은 파라미터는 실제 배포 환경을 고려해 정해야 한다. Day 2 과제에서 이러한 파라미터를 코드로 노출하면, 추후 메인넷 배포 시 쉽게 조정할 수 있다.
