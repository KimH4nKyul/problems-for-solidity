# Day 3 블록체인 핵심 지식

- **블록 타임과 `block.timestamp`**: 이더리움에서 `block.timestamp`는 블록 채굴자가 제안하는 값으로, 실제 시간과 수 초 정도 차이가 있을 수 있습니다. 엄격한 시간 보장을 하지는 못하지만, 프로토콜 규칙상 과거로 크게 되돌릴 수 없으므로 짧은 지연(time-lock) 제어에 활용할 수 있습니다.
- **이벤트 인덱싱**: `indexed` 키워드를 사용하면 로그 필드가 주제(topic)로 분류되어 빠르게 검색할 수 있습니다. 이번 과제의 이벤트는 계정과 수신자를 모두 `indexed`로 설정해 오프체인 알림 시스템이 특정 사용자의 활동을 쉽게 찾아볼 수 있도록 합니다.
- **재진입 공격(Reentrancy)**: 외부 호출 중에 공격자가 다시 컨트랙트를 호출해 상태가 완전히 업데이트되기 전에 자산을 탈취할 수 있는 취약점입니다. 이를 막으려면 외부 호출 전에 상태를 선반영하고, 보류 요청을 `delete`한 뒤 자금을 전송하는 패턴을 지켜야 합니다. 필요하다면 `ReentrancyGuard`를 추가할 수도 있지만, 이번 과제에서는 상태 업데이트 순서만으로도 충분히 방어할 수 있습니다.
- **Allowlist 관리 전략**: 온체인 allowlist는 상태 변수에 직접 보관하므로 주소마다 `SSTORE`가 발생합니다. 빈번한 갱신이 필요하면 Merkle proof나 off-chain 서명을 활용한 접근 제어를 고려하지만, 소규모 사용자 그룹에는 단순 매핑이 가장 직관적이고 가독성이 높습니다.
